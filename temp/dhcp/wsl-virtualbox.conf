# WSL + VirtualBox Configuration for PXE Boot Server
# Special configuration for WSL running PXE server with VirtualBox on Windows host

# Disable DNS server functionality
port=0

# Enable DHCP server - using VirtualBox host-only network range
dhcp-range=172.28.205.230,172.28.205.250,255.255.240.0,12h

# Network options
dhcp-option=3,172.28.205.1  # Router (option 3)
dhcp-option=6,8.8.8.8,8.8.4.4  # DNS Server (option 6)

# PXE boot options - using this machine's IP as the PXE server
dhcp-boot=pxelinux.0,pxeserver,172.28.205.1

# TFTP server configuration - using dnsmasq for TFTP too
enable-tftp
tftp-root=/tftpboot

# WSL-specific options for better connectivity with VirtualBox on Windows
# Allow VirtualBox VM to reach WSL
dhcp-broadcast
# Use more aggressive settings for cross-host communication
dhcp-option=vendor:PXEClient,6,2b

# Logging (help diagnose issues)
log-dhcp
log-queries
log-facility=/tmp/dnsmasq.log

# Bind to all interfaces for test purposes
interface=*

# Don't use /etc/hosts or /etc/resolv.conf
no-hosts
no-resolv